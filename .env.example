# SRF Online Teachings Portal — Environment Variables
# Copy to .env.local for local development.
# In deployed environments, Terraform reads from AWS Secrets Manager (ADR-125)
# and distributes values as Vercel environment variables.
#
# Tag legend:
#   [terraform]        = set by Terraform output in deployed environments; fill manually for local dev
#   [secrets-manager]  = stored in AWS Secrets Manager; Terraform distributes to Vercel; fill manually in .env.local
#   [static]           = fixed value; same across all environments
#
# See also:
#   docs/guides/getting-started.md   — simple human walkthrough (start here)
#   docs/guides/bootstrap-credentials.md — account provisioning checklist
#   design/search/DES-039            — full environment configuration spec
#   /lib/config.ts                  — named constants (not env vars)
#   ADR-125                         — secrets management strategy
#   ADR-126                         — Vercel OIDC federation

# ── Neon PostgreSQL ─────────────────────────────────────────────
NEON_DATABASE_URL=               # [secrets-manager] Pooled connection (Vercel API routes, short-lived serverless)
NEON_DATABASE_URL_DIRECT=        # [secrets-manager] Direct connection (dbmate migrations, Lambda batch, scripts)
NEON_PROJECT_ID=                 # [terraform] Neon project ID for API calls

# ── Neon API (operations — branch creation, snapshots, schema diffs) ──
NEON_API_KEY=                    # [secrets-manager] Project-scoped API key for dev operations (ADR-124 § API Key Scoping)

# ── AWS ─────────────────────────────────────────────────────────
# Vercel OIDC federation (ADR-126) — no stored AWS credentials in deployed environments.
# Vercel functions obtain temporary credentials via OIDC token exchange.
# AWS_ROLE_ARN is set by Terraform in Vercel env vars (not a secret).
# For local dev, use AWS_PROFILE or access keys below.
AWS_REGION=us-west-2             # [static] Bedrock, Lambda, S3, Secrets Manager
AWS_ROLE_ARN=                    # [terraform] IAM role for Vercel OIDC — Bedrock + Secrets Manager permissions
# Local dev only (not used in deployed environments):
# AWS_PROFILE=srf-dev            # Preferred: named profile in ~/.aws/credentials
# AWS_ACCESS_KEY_ID=             # Alternative: IAM user with Bedrock permissions
# AWS_SECRET_ACCESS_KEY=         # Alternative: paired with above

# ── AI ──────────────────────────────────────────────────────────
VOYAGE_API_KEY=                  # [secrets-manager] Voyage voyage-3-large embeddings (ADR-118)

# ── Contentful ──────────────────────────────────────────────────
CONTENTFUL_SPACE_ID=             # [terraform] Space identifier
CONTENTFUL_ACCESS_TOKEN=         # [secrets-manager] Delivery API (read-only)
CONTENTFUL_MANAGEMENT_TOKEN=     # [secrets-manager] Management API — ingestion scripts only, not deployed

# ── Observability ───────────────────────────────────────────────
NEXT_PUBLIC_SENTRY_DSN=          # [terraform] Sentry error tracking (bundled into client JS)
SENTRY_AUTH_TOKEN=               # [secrets-manager] Source map uploads (CI only in deployed envs)

# ── Future milestones (uncomment when needed) ───────────────────
# COHERE_API_KEY=                # [secrets-manager] Milestone 2b+ — Rerank 3.5 (ADR-119)
# YOUTUBE_API_KEY=               # [secrets-manager] Arc 2+ — video integration
# SENDGRID_API_KEY=              # [secrets-manager] Milestone 5a — email (see PRO-015)
# NEXT_PUBLIC_AMPLITUDE_KEY=     # [terraform] Milestone 3d — analytics
# NEW_RELIC_LICENSE_KEY=         # [secrets-manager] Milestone 3d — observability
# AUTH0_SECRET=                  # [secrets-manager] Milestone 7a+ — authentication (if ever)
# AUTH0_BASE_URL=                # [terraform] Milestone 7a+
# AUTH0_ISSUER_BASE_URL=         # [terraform] Milestone 7a+
# AUTH0_CLIENT_ID=               # [terraform] Milestone 7a+
# AUTH0_CLIENT_SECRET=           # [secrets-manager] Milestone 7a+
